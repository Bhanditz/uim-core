<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:jee="http://www.springframework.org/schema/jee"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
  http://www.springframework.org/schema/beans/spring-beans.xsd
  http://www.springframework.org/schema/jee
  http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
  http://www.springframework.org/schema/context
  http://www.springframework.org/schema/context/spring-context.xsd">
	<context:annotation-config />
	
	<bean id="serviceProperties" class="eu.europeana.cloud.common.service.ServiceProperties">
		<constructor-arg name="serviceId" value="1" />
		<constructor-arg name="serviceName" value="UIS" />
		
		<!-- TODO: https://jira.man.poznan.pl/jira/browse/ECL-194 -->
		<constructor-arg name="listenAddress" value="http://localhost:8080/ecloud-service-uis-rest/" />
	</bean>
	
	<bean id="zookeeperService" class="eu.europeana.cloud.service.uis.registration.ZookeeperService">
	
		<!-- 
		Zookeeper address, this could be a single address in case only one Zookeeper is deployed, e.g 127.0.0.1:2181
		OR
		a comma seperated list of Zookeeper addresses, e.g localhost:2181,localhost:2182,localhost:2183
		-->
		<constructor-arg name="zookeeperAddress" value="localhost:2181"/>
		<constructor-arg name="zookeeperConnectionTimeout" value="1000"/>
		
		<!-- 
		This means that if this instance crashes, it will take 1 minute before Zookeeper notices the crash and notifies the clients. 
		Obviously the smaller this number is the sooner zookeeper notices failures. 
		
		Before changing this value, be sure JVM garbage collection configuration is under control, otherwise, a long garbage collection that 
		lasts beyond the ZooKeeper session timeout will be interpreted as "server down"..
		-->
		<constructor-arg name="zookeeperSessionTimeout" value="1000"/>
		
		<constructor-arg name="zNode" value="/eCloud/serviceDiscovery"/>
		<constructor-arg name="serviceProperties" ref="serviceProperties"/>
	</bean>
</beans>